"use strict";var x=Object.create;var l=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var q=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var b=(t,r,o,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of S(r))!v.call(t,n)&&n!==o&&l(t,n,{get:()=>r[n],enumerable:!(s=E(r,n))||s.enumerable});return t};var i=(t,r,o)=>(o=t!=null?x(q(t)):{},b(r||!t||!t.__esModule?l(o,"default",{value:t,enumerable:!0}):o,t));var w=i(require("cors")),I=require("dotenv/config"),u=i(require("express")),a=i(require("fs")),j=i(require("https"));var T=require("express");var R=require("@prisma/client"),m=new R.PrismaClient;var e=class{static async buscaTransactions(r,o){try{let s=await m.transactions.findMany();return s?o.json(s):o.json({error:"nenhuma transaction encontrada"})}catch(s){return o.json({error:`${s}`})}}static async criaTransactions(r,o){try{let{description:s,type:n,category:h,price:d}=r.body;if(!s||!n||!h||!d)return o.json({error:"campos ausentes"});let C=await m.transactions.create({data:{description:s,type:n,category:h,price:d}});return o.json({message:"sucesso",data:C})}catch(s){return o.json({error:`${s}`})}}};var p=(0,T.Router)();p.get("/transactions",e.buscaTransactions);p.post("/transactions",e.criaTransactions);var{CAMINHO_KEY:f,CAMINHO_CERT:y}=process.env;if(!f||!y)throw new Error("Caminhos certificado n\xE3o encontrados");if(!a.default.existsSync(f))throw new Error("Caminho key inv\xE1lido");if(!a.default.existsSync(y))throw new Error("Caminho CERT inv\xE1lido");var O={key:a.default.readFileSync(f),cert:a.default.readFileSync(y)},c=(0,u.default)();c.use((0,w.default)());c.use(u.default.json());c.get("/ping",(t,r)=>(console.log("Pong!"),r.json({message:"Pong!"})));c.use(p);var P=j.default.createServer(O,c),g=3737;P.listen(g,()=>{console.log(`cash-control: ${g}`)});
